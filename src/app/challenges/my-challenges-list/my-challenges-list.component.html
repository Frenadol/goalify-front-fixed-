<div class="page-container"> <!-- Contenedor principal añadido -->
  <div class="my-challenges-container">
    <div class="page-header">
      <h1>Mis Desafíos</h1>
      <p>Aquí puedes ver y gestionar los desafíos en los que estás participando.</p>
    </div>

    <div *ngIf="isLoading" class="loading-indicator">
      <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
      <p>Cargando tus desafíos...</p>
    </div>

    <div *ngIf="!isLoading && errorMessage" class="error-message">
      <mat-icon color="warn">error_outline</mat-icon>
      <p>{{ errorMessage }}</p>
      <button mat-stroked-button (click)="loadUserJoinedChallenges()">Reintentar</button>
    </div>

    <div *ngIf="!isLoading && !errorMessage && userChallengeItems.length === 0" class="empty-state">
      <mat-icon class="empty-icon">emoji_events</mat-icon>
      <h2>Aún no te has unido a ningún desafío</h2>
      <p>¡Es un buen momento para explorar y encontrar tu próximo reto!</p>
      <a mat-flat-button color="primary" routerLink="/challenges">Explorar Desafíos</a>
    </div>

    <div *ngIf="!isLoading && !errorMessage && userChallengeItems.length > 0" class="challenges-grid">
      <app-challenge-card
        *ngFor="let item of userChallengeItems"
        [challenge]="item.challenge"
        [isJoined]="true"
        [userChallengeStatus]="item.userChallenge.estadoParticipacion"
        [canBeCompleted]="true"
        (challengeLeft)="handleChallengeLeft($event)"
        (completeChallengeClicked)="handleCompleteChallengeRequest(item)"
        class="user-challenge-card">
      </app-challenge-card>
    </div>
  </div>
</div> <!-- Fin del contenedor principal -->
